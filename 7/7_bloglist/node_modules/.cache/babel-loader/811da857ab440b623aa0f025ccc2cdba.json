{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Juha\\\\Desktop\\\\Full_stack_open_2018\\\\7\\\\7_bloglist\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Juha\\\\Desktop\\\\Full_stack_open_2018\\\\7\\\\7_bloglist\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport loginService from '../services/login';\nimport blogService from '../services/blogs';\nexport var actionForLogin = function actionForLogin(username, password) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch) {\n        var user;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return loginService.login({\n                  username: username,\n                  password: password\n                });\n\n              case 2:\n                user = _context.sent;\n                blogService.setToken(user.token);\n                window.localStorage.setItem('loggedUser', JSON.stringify(user));\n                _context.next = 7;\n                return dispatch({\n                  type: 'LOGIN',\n                  user: user\n                });\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var actionForSettingUser = function actionForSettingUser(user) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(dispatch) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return blogService.setToken(user.token);\n\n              case 2:\n                _context2.next = 4;\n                return dispatch({\n                  type: 'SET',\n                  user: user\n                });\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var actionForLogout = function actionForLogout() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(dispatch) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return dispatch({\n                  type: 'LOGOUT'\n                });\n\n              case 2:\n                window.localStorage.removeItem('loggedUser');\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }()\n  );\n};\n\nvar userReducer = function userReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case 'LOGIN':\n      return action.user;\n\n    case 'SET':\n      return action.user;\n\n    case 'LOGOUT':\n      return null;\n  }\n\n  return state;\n};\n\nexport default userReducer;","map":{"version":3,"sources":["C:\\Users\\Juha\\Desktop\\Full_stack_open_2018\\7\\7_bloglist\\src\\reducers\\userReducer.js"],"names":["loginService","blogService","actionForLogin","username","password","dispatch","login","user","setToken","token","window","localStorage","setItem","JSON","stringify","type","actionForSettingUser","actionForLogout","removeItem","userReducer","state","action"],"mappings":";;AAAA,OAAOA,YAAP,MAAyB,mBAAzB;AACA,OAAOC,WAAP,MAAwB,mBAAxB;AAEA,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,QAAD,EAAWC,QAAX,EAAwB;AAClD;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAO,iBAAOC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEgBL,YAAY,CAACM,KAAb,CAAmB;AAAEH,kBAAAA,QAAQ,EAARA,QAAF;AAAYC,kBAAAA,QAAQ,EAARA;AAAZ,iBAAnB,CAFhB;;AAAA;AAEGG,gBAAAA,IAFH;AAGHN,gBAAAA,WAAW,CAACO,QAAZ,CAAqBD,IAAI,CAACE,KAA1B;AACAC,gBAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,YAA5B,EAA0CC,IAAI,CAACC,SAAL,CAAeP,IAAf,CAA1C;AAJG;AAAA,uBAKGF,QAAQ,CAAC;AACXU,kBAAAA,IAAI,EAAE,OADK;AAEXR,kBAAAA,IAAI,EAAJA;AAFW,iBAAD,CALX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAUH,CAXM;AAYP,OAAO,IAAMS,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACT,IAAD,EAAU;AAC1C;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAO,kBAAOF,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACGJ,WAAW,CAACO,QAAZ,CAAqBD,IAAI,CAACE,KAA1B,CADH;;AAAA;AAAA;AAAA,uBAEGJ,QAAQ,CAAC;AACXU,kBAAAA,IAAI,EAAE,KADK;AAEXR,kBAAAA,IAAI,EAAJA;AAFW,iBAAD,CAFX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAOH,CARM;AASP,OAAO,IAAMU,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AACjC;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAO,kBAAOZ,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACGA,QAAQ,CAAC;AACXU,kBAAAA,IAAI,EAAE;AADK,iBAAD,CADX;;AAAA;AAIHL,gBAAAA,MAAM,CAACC,YAAP,CAAoBO,UAApB,CAA+B,YAA/B;;AAJG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAMH,CAPM;;AASP,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAA0B;AAAA,MAAzBC,KAAyB,uEAAjB,IAAiB;AAAA,MAAXC,MAAW;;AAC1C,UAAQA,MAAM,CAACN,IAAf;AACI,SAAK,OAAL;AACI,aAAOM,MAAM,CAACd,IAAd;;AACJ,SAAK,KAAL;AACI,aAAOc,MAAM,CAACd,IAAd;;AACJ,SAAK,QAAL;AACI,aAAO,IAAP;AANR;;AAQA,SAAOa,KAAP;AACH,CAVD;;AAWA,eAAeD,WAAf","sourcesContent":["import loginService from '../services/login'\r\nimport blogService from '../services/blogs'\r\n\r\nexport const actionForLogin = (username, password) => {\r\n    return async (dispatch) => {\r\n\r\n        const user = await loginService.login({ username, password })\r\n        blogService.setToken(user.token)\r\n        window.localStorage.setItem('loggedUser', JSON.stringify(user))\r\n        await dispatch({\r\n            type: 'LOGIN',\r\n            user\r\n        })\r\n    }\r\n}\r\nexport const actionForSettingUser = (user) => {\r\n    return async (dispatch) => {\r\n        await blogService.setToken(user.token)\r\n        await dispatch({\r\n            type: 'SET',\r\n            user\r\n        })\r\n    }\r\n}\r\nexport const actionForLogout = () => {\r\n    return async (dispatch) => {\r\n        await dispatch({\r\n            type: 'LOGOUT',\r\n        })\r\n        window.localStorage.removeItem('loggedUser')\r\n    }\r\n}\r\n\r\nconst userReducer = (state = null, action) => {\r\n    switch (action.type) {\r\n        case 'LOGIN':\r\n            return action.user\r\n        case 'SET':\r\n            return action.user\r\n        case 'LOGOUT':\r\n            return null\r\n    }\r\n    return state\r\n}\r\nexport default userReducer"]},"metadata":{},"sourceType":"module"}