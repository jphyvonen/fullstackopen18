{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Juha\\\\Desktop\\\\Full_stack_open_2018\\\\5\\\\5.1-\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Juha\\\\Desktop\\\\Full_stack_open_2018\\\\5\\\\5.1-\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"C:\\\\Users\\\\Juha\\\\Desktop\\\\Full_stack_open_2018\\\\5\\\\5.1-\\\\src\\\\components\\\\Blog.js\";\nimport React from 'react';\nimport TogglableText from '../components/TogglableText';\nimport blogService from '../services/blogs';\nimport Button from '../components/Button';\n\nvar Blog = function Blog(_ref) {\n  var blog = _ref.blog,\n      update = _ref.update;\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8\n    },\n    __self: this\n  }, React.createElement(TogglableText, {\n    author: blog.author,\n    title: blog.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9\n    },\n    __self: this\n  }, React.createElement(BlogDetails, {\n    blog: blog,\n    update: update,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10\n    },\n    __self: this\n  })));\n};\n\nvar BlogDetails = function BlogDetails(_ref2) {\n  var blog = _ref2.blog,\n      update = _ref2.update;\n  var name = 'Unknown';\n\n  if (blog.user !== null && blog.user !== undefined) {\n    name = blog.user.name;\n  }\n\n  var hideIfNotLoggedUsers = hideOrShowDeleteFor(blog);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"urlDiv\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  }, blog.url), React.createElement(\"div\", {\n    className: \"likesDiv\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }, blog.likes, \" likes \", React.createElement(Button, {\n    onClick: Like(blog, update),\n    text: 'Like',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }, \"Added by: \", name), React.createElement(\"div\", {\n    style: hideIfNotLoggedUsers,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }, React.createElement(Button, {\n    onClick: Delete(blog, update),\n    text: 'Delete',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }), \" \"));\n};\n\nvar Like = function Like(blog, update) {\n  return (\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var likedBlog;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              likedBlog = {\n                user: blog.user,\n                likes: blog.likes + 1,\n                author: blog.author,\n                title: blog.title,\n                url: blog.url\n              };\n              _context.next = 3;\n              return blogService.update(blog._id, likedBlog);\n\n            case 3:\n              update();\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }))\n  );\n};\n\nvar Delete = function Delete(blog, update) {\n  return (\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!window.confirm(\"Are you sure you want to delete '\".concat(blog.title, \"' by \").concat(blog.author))) {\n                _context2.next = 4;\n                break;\n              }\n\n              _context2.next = 3;\n              return blogService.remove(blog._id);\n\n            case 3:\n              update();\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }))\n  );\n};\n\nexport default Blog; //some util\n\nfunction hideOrShowDeleteFor(blog) {\n  var loggedUserJSON = window.localStorage.getItem('loggedUser');\n  if (blog.user === null || blog.user === undefined || !loggedUserJSON) return {\n    display: ''\n  };\n  var user = JSON.parse(loggedUserJSON);\n  return {\n    display: user.name === blog.user.name ? '' : 'none'\n  };\n}","map":{"version":3,"sources":["C:\\Users\\Juha\\Desktop\\Full_stack_open_2018\\5\\5.1-\\src\\components\\Blog.js"],"names":["React","TogglableText","blogService","Button","Blog","blog","update","author","title","BlogDetails","name","user","undefined","hideIfNotLoggedUsers","hideOrShowDeleteFor","url","likes","Like","Delete","likedBlog","_id","window","confirm","remove","loggedUserJSON","localStorage","getItem","display","JSON","parse"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport TogglableText from '../components/TogglableText'\r\nimport blogService from '../services/blogs'\r\nimport Button from '../components/Button'\r\n\r\n\r\nconst Blog = ({ blog, update }) => (\r\n  <div>\r\n    <TogglableText author={blog.author} title={blog.title}>\r\n      <BlogDetails blog={blog} update={update} />\r\n    </TogglableText>\r\n  </div>\r\n)\r\nconst BlogDetails = ({ blog, update }) => {\r\n  let name = 'Unknown'\r\n\r\n  if (blog.user !== null && blog.user !== undefined) {\r\n    name = blog.user.name\r\n  }\r\n  let hideIfNotLoggedUsers = hideOrShowDeleteFor(blog);\r\n  return (\r\n    <div>\r\n      <div className=\"urlDiv\">{blog.url}</div>\r\n      <div className=\"likesDiv\">{blog.likes} likes <Button onClick={Like(blog, update)} text={'Like'} /></div>\r\n      <div>Added by: {name}</div>\r\n      <div style={hideIfNotLoggedUsers}><Button onClick={Delete(blog, update)} text={'Delete'}></Button> </div>\r\n    </div>\r\n  )\r\n}\r\nconst Like = (blog, update) => {\r\n  return async () => {\r\n    const likedBlog = {\r\n      user: blog.user,\r\n      likes: blog.likes + 1,\r\n      author: blog.author,\r\n      title: blog.title,\r\n      url: blog.url\r\n    }\r\n    await blogService.update(blog._id, likedBlog)\r\n    update()\r\n  }\r\n}\r\nconst Delete = (blog, update) => {\r\n  return async () => {\r\n    if (window.confirm(`Are you sure you want to delete '${blog.title}' by ${blog.author}`)) {\r\n      await blogService.remove(blog._id)\r\n      update()\r\n    }\r\n  }\r\n}\r\nexport default Blog\r\n\r\n//some util\r\nfunction hideOrShowDeleteFor(blog) {\r\n  const loggedUserJSON = window.localStorage.getItem('loggedUser');\r\n  if (blog.user === null || blog.user === undefined || !loggedUserJSON)\r\n    return { display: '' }\r\n\r\n  const user = JSON.parse(loggedUserJSON);\r\n  return { display: user.name === blog.user.name ? '' : 'none' };\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}