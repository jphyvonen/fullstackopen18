{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Juha\\\\Desktop\\\\Full_stack_open_2018\\\\2\\\\2.6-2.19\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\Juha\\\\Desktop\\\\Full_stack_open_2018\\\\2\\\\2.6-2.19\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Juha\\\\Desktop\\\\Full_stack_open_2018\\\\2\\\\2.6-2.19\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Juha\\\\Desktop\\\\Full_stack_open_2018\\\\2\\\\2.6-2.19\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Juha\\\\Desktop\\\\Full_stack_open_2018\\\\2\\\\2.6-2.19\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Juha\\\\Desktop\\\\Full_stack_open_2018\\\\2\\\\2.6-2.19\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Juha\\\\Desktop\\\\Full_stack_open_2018\\\\2\\\\2.6-2.19\\\\src\\\\App.js\";\nimport React from 'react';\nimport personService from './services/persons';\nimport \"./index.css\";\n\nvar Entry = function Entry(_ref) {\n  var entries = _ref.entries,\n      del = _ref.del;\n  return React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 6\n    },\n    __self: this\n  }, entries.name, \" \", entries.number, \" \", React.createElement(\"button\", {\n    onClick: del,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 6\n    },\n    __self: this\n  }, \"poista\"));\n};\n\nvar Input = function Input(_ref2) {\n  var name = _ref2.name,\n      value = _ref2.value,\n      handleChanged = _ref2.handleChanged;\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10\n    },\n    __self: this\n  }, name, \":\", React.createElement(\"input\", {\n    value: value,\n    onChange: handleChanged,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  }));\n};\n\nvar FormAddPerson = function FormAddPerson(_ref3) {\n  var onSubmit = _ref3.onSubmit,\n      state = _ref3.state,\n      handleNameChange = _ref3.handleNameChange,\n      handleNumberChage = _ref3.handleNumberChage;\n  return React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  }, \"Lis\\xE4\\xE4 uusi\"), React.createElement(Input, {\n    name: \"nimi\",\n    value: state.newName,\n    handleChanged: handleNameChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }), React.createElement(Input, {\n    name: \"numero\",\n    value: state.newNumber,\n    handleChanged: handleNumberChage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    },\n    __self: this\n  }, \"lis\\xE4\\xE4\")));\n};\n\nvar Notification = function Notification(_ref4) {\n  var message = _ref4.message;\n\n  if (message === null) {\n    return null;\n  }\n\n  return React.createElement(\"div\", {\n    className: \"status\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, message);\n};\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.addName = function (event) {\n      event.preventDefault();\n      var entryObject = {\n        name: _this.state.newName,\n        number: _this.state.newNumber\n      };\n\n      var duplicateNames = _this.state.persons.filter(function (x) {\n        return x.name === _this.state.newName;\n      });\n\n      if (duplicateNames.length === 0) {\n        personService.create(entryObject).then(function (response) {\n          console.log(response.data);\n\n          _this.setState({\n            persons: _this.state.persons.concat(response.data),\n            newName: '',\n            newNumber: '',\n            statusMessage: 'Lisättiin: ' + response.data.name\n          });\n\n          setTimeout(function () {\n            _this.setState({\n              statusMessage: null\n            });\n          }, 5000);\n        });\n      } else if (window.confirm(\"\".concat(_this.state.newName, \" l\\xF6ytyy jo luettelosta. P\\xE4ivitet\\xE4\\xE4nk\\xF6 numero?\"))) {\n        var oldPerson = _this.state.persons.find(function (x) {\n          return x.name === _this.state.newName;\n        });\n\n        console.log(\"oldperson\", oldPerson.id);\n\n        var newPerson = _objectSpread({}, oldPerson, {\n          number: _this.state.newNumber\n        });\n\n        console.log(\"newperson\", newPerson.id);\n        personService.update(oldPerson.id, newPerson).then(function (res) {\n          console.log(\"frontti\", res.data.id);\n\n          _this.setState({\n            persons: _this.state.persons.map(function (person) {\n              return person.id !== newPerson.id ? person : res.data;\n            })\n          });\n        });\n      }\n    };\n\n    _this.deleteId = function (id) {\n      return function () {\n        var nimi = _this.state.persons.find(function (x) {\n          return x.id === id;\n        }).name;\n\n        if (window.confirm(\"Poistetaanko: \".concat(nimi))) personService.remove(id).then(_this.setState({\n          persons: _this.state.persons.filter(function (x) {\n            return x.id !== id;\n          }),\n          statusMessage: \"Poistettiin: \" + nimi\n        }));\n        setTimeout(function () {\n          _this.setState({\n            statusMessage: null\n          });\n        }, 5000);\n      };\n    };\n\n    _this.handleNumberChange = function (event) {\n      _this.setState({\n        newNumber: event.target.value\n      });\n    };\n\n    _this.handleNameChange = function (event) {\n      _this.setState({\n        newName: event.target.value\n      });\n    };\n\n    _this.handleFilterChange = function (event) {\n      _this.setState({\n        filter: event.target.value\n      });\n    };\n\n    _this.state = {\n      persons: [],\n      newName: '',\n      newNumber: '',\n      filter: '',\n      statusMessage: null\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      console.log(\"did mount\");\n      personService.getAll().then(function (response) {\n        _this2.setState({\n          persons: response.data\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var filtered = this.state.persons.filter(function (x) {\n        return x.name.toLowerCase().includes(_this3.state.filter.toLowerCase());\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(Notification, {\n        message: this.state.statusMessage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"Puhelinluettelo\"), React.createElement(Input, {\n        name: \"rajaa\",\n        handleChanged: this.handleFilterChange,\n        value: this.state.filter,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }), React.createElement(FormAddPerson, {\n        onSubmit: this.addName,\n        state: this.state,\n        handleNameChange: this.handleNameChange,\n        handleNumberChage: this.handleNumberChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"Numerot\"), filtered.map(function (x) {\n        return React.createElement(Entry, {\n          key: x.name,\n          entries: x,\n          del: _this3.deleteId(x.id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        });\n      }));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\Juha\\Desktop\\Full_stack_open_2018\\2\\2.6-2.19\\src\\App.js"],"names":["React","personService","Entry","entries","del","name","number","Input","value","handleChanged","FormAddPerson","onSubmit","state","handleNameChange","handleNumberChage","newName","newNumber","Notification","message","App","props","addName","event","preventDefault","entryObject","duplicateNames","persons","filter","x","length","create","then","response","console","log","data","setState","concat","statusMessage","setTimeout","window","confirm","oldPerson","find","id","newPerson","update","res","map","person","deleteId","nimi","remove","handleNumberChange","target","handleFilterChange","getAll","filtered","toLowerCase","includes","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport personService from './services/persons'\r\nimport \"./index.css\"\r\n\r\nconst Entry = ({ entries, del }) => {\r\n    return <p>{entries.name} {entries.number} <button onClick={del}>poista</button></p>\r\n}\r\nconst Input = ({ name, value, handleChanged, }) => {\r\n    return (\r\n        <div>\r\n            {name}:\r\n            <input\r\n                value={value}\r\n                onChange={handleChanged}\r\n            />\r\n        </div>\r\n    )\r\n}\r\nconst FormAddPerson = ({ onSubmit, state, handleNameChange, handleNumberChage }) => {\r\n    return (\r\n\r\n        <form onSubmit={onSubmit}>\r\n            <h2>Lisää uusi</h2>\r\n            <Input name={\"nimi\"} value={state.newName} handleChanged={handleNameChange} />\r\n            <Input name={\"numero\"} value={state.newNumber} handleChanged={handleNumberChage} />\r\n            <div>\r\n                <button type=\"submit\">lisää</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n    return (\r\n        <div className=\"status\">\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            persons: [],\r\n            newName: '',\r\n            newNumber: '',\r\n            filter: '',\r\n            statusMessage: null\r\n        }\r\n\r\n    }\r\n    componentDidMount() {\r\n        console.log(\"did mount\")\r\n        personService\r\n            .getAll()\r\n            .then(response => {\r\n                this.setState({ persons: response.data })\r\n            })\r\n    }\r\n    addName = (event) => {\r\n        event.preventDefault()\r\n        const entryObject = {\r\n            name: this.state.newName,\r\n            number: this.state.newNumber\r\n        }\r\n        var duplicateNames = this.state.persons\r\n            .filter(x => x.name === this.state.newName)\r\n\r\n        if (duplicateNames.length === 0) {\r\n            personService\r\n                .create(entryObject)\r\n                .then(response => {\r\n                    console.log(response.data)\r\n                    this.setState({\r\n                        persons: this.state.persons.concat(response.data),\r\n                        newName: '',\r\n                        newNumber: '',\r\n                        statusMessage: 'Lisättiin: ' + response.data.name\r\n                    })\r\n                    setTimeout(() => {\r\n                        this.setState({ statusMessage: null })\r\n                    }, 5000)\r\n                })\r\n        }\r\n        else\r\n            if (window.confirm(`${this.state.newName} löytyy jo luettelosta. Päivitetäänkö numero?`)) {\r\n                const oldPerson = this.state.persons\r\n                    .find(x => x.name === this.state.newName)\r\n                    console.log(\"oldperson\", oldPerson.id)\r\n                const newPerson = {...oldPerson, number: this.state.newNumber}\r\n                console.log(\"newperson\", newPerson.id)\r\n\r\n                personService\r\n                    .update(oldPerson.id, newPerson)\r\n                    .then(res => {\r\n                        console.log(\"frontti\", res.data.id)\r\n                        this.setState({\r\n                            persons: this.state.persons.map(person => person.id !== newPerson.id ? person : res.data),\r\n                        })\r\n                    })\r\n            }\r\n\r\n\r\n    }\r\n    deleteId = (id) => {\r\n        return () => {\r\n            const nimi = this.state.persons.find(x => x.id === id).name\r\n\r\n            if (window.confirm(`Poistetaanko: ${nimi}`))\r\n                personService\r\n                    .remove(id)\r\n                    .then(\r\n                        this.setState({\r\n                            persons: this.state.persons.filter(x => x.id !== id),\r\n                            statusMessage: \"Poistettiin: \" + nimi\r\n                        })\r\n                    )\r\n            setTimeout(() => {\r\n                this.setState({ statusMessage: null })\r\n            }, 5000)\r\n        }\r\n    }\r\n    handleNumberChange = (event) => {\r\n        this.setState({ newNumber: event.target.value })\r\n    }\r\n    handleNameChange = (event) => {\r\n        this.setState({ newName: event.target.value })\r\n    }\r\n    handleFilterChange = (event) => {\r\n        this.setState({ filter: event.target.value })\r\n    }\r\n    render() {\r\n        const filtered = this.state.persons.filter(x => x.name.toLowerCase().includes(this.state.filter.toLowerCase()))\r\n        return (\r\n            <div>\r\n                <Notification message={this.state.statusMessage} />\r\n                <h2>Puhelinluettelo</h2>\r\n                <Input name={\"rajaa\"} handleChanged={this.handleFilterChange} value={this.state.filter} />\r\n                <FormAddPerson onSubmit={this.addName} state={this.state} handleNameChange={this.handleNameChange} handleNumberChage={this.handleNumberChange} />\r\n                <h2>Numerot</h2>\r\n                {filtered.map(x => <Entry key={x.name} entries={x} del={this.deleteId(x.id)} />)}\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nexport default App"]},"metadata":{},"sourceType":"module"}